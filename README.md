# n8n-nodes-finolog

Интеграция n8n с API Finolog для автоматизации финансовых операций и управления бизнес-процессами.

## Описание

Этот пакет предоставляет ноду для n8n, которая позволяет взаимодействовать с API Finolog. Нода поддерживает широкий спектр операций для управления различными аспектами бизнеса, включая пользователей, валюты, бизнесы, компании, счета, операции и многое другое.

## Установка

```bash
npm install n8n-nodes-finolog
```

## Настройка

Для использования ноды необходимо настроить учетные данные Finolog API:

1. Получите API ключ в вашем аккаунте Finolog
2. В n8n перейдите в раздел Credentials
3. Добавьте новые учетные данные типа "Finolog API"
4. Введите ваш API ключ

## Поддерживаемые ресурсы

### Пользователь
- Получение информации о пользователе
- Обновление информации о пользователе

### Валюта
- Получение списка всех доступных валют с курсами

### Бизнес
- Получение списка всех бизнесов
- Получение информации о конкретном бизнесе
- Создание нового бизнеса
- Обновление информации о бизнесе
- Удаление бизнеса

### Компания
- Управление компаниями

### Счет
- Управление счетами

### Операция
- Управление операциями

### Статья операции
- Управление статьями операций

### Проект
- Управление проектами

### Контрагент
- Управление контрагентами

### Реквизит контрагента
- Управление реквизитами контрагентов

### Документ
- Управление документами

### Товар
- Управление товарами и услугами

### Пакет
- Управление пакетами товаров

### Элемент пакета
- Управление элементами пакета

## Примеры использования

### Получение информации о пользователе
1. Добавьте ноду Finolog в ваш рабочий процесс
2. Выберите ресурс "Пользователь"
3. Выберите операцию "Получить"
4. Запустите рабочий процесс

### Создание нового бизнеса
1. Добавьте ноду Finolog в ваш рабочий процесс
2. Выберите ресурс "Бизнес"
3. Выберите операцию "Создать"
4. Заполните обязательные поля:
   - Название бизнеса
   - ID базовой валюты
5. Запустите рабочий процесс

## Требования

- n8n версии 0.1.0 или выше
- Активный аккаунт Finolog с API доступом

## Лицензия

MIT

## Поддержка

При возникновении проблем или вопросов, пожалуйста, создайте issue в репозитории проекта.

## Техническая документация

### Типы данных

#### Основные типы
- `IExecuteFunctions` - интерфейс для выполнения функций ноды
- `INodeExecutionData` - интерфейс для данных выполнения ноды
- `INodeType` - интерфейс типа ноды
- `INodeTypeDescription` - интерфейс описания типа ноды
- `INodePropertyOptions` - интерфейс опций свойств ноды

### Структура ноды

#### Основные компоненты
```typescript
export class Finolog implements INodeType {
    description: INodeTypeDescription = {
        displayName: 'Finolog',
        name: 'finolog',
        icon: 'file:finolog.svg',
        group: ['transform'],
        version: 1,
        // ...
    }
}
```

#### Параметры ноды

##### Ресурсы (resource)
- `user` - Пользователь
- `currency` - Валюта
- `biz` - Бизнес
- `company` - Компания
- `account` - Счет
- `transaction` - Операция
- `category` - Статья операции
- `project` - Проект
- `contractor` - Контрагент
- `requisite` - Реквизит контрагента
- `document` - Документ
- `item` - Товар
- `package` - Пакет
- `packageItem` - Элемент пакета

### Методы API

#### Пользователь (user)
```typescript
// Получение информации о пользователе
GET /user

// Обновление информации о пользователе
PUT /user
{
    firstName: string,
    lastName: string
}
```

#### Валюта (currency)
```typescript
// Получение списка валют
GET /currencies
```

#### Бизнес (biz)
```typescript
// Получение списка бизнесов
GET /biz

// Получение информации о бизнесе
GET /biz/{id}

// Создание бизнеса
POST /biz
{
    name: string,
    baseCurrencyId: number
}

// Обновление бизнеса
PUT /biz/{id}
{
    name: string
}

// Удаление бизнеса
DELETE /biz/{id}
```

### Параметры запросов

#### Общие параметры
- `apiKey` - API ключ для аутентификации (обязательный)
- `bizId` - ID бизнеса (обязательный для большинства операций)

#### Параметры пагинации
- `page` - номер страницы
- `per_page` - количество элементов на странице

### Обработка ошибок

Нода обрабатывает следующие типы ошибок:
- Ошибки аутентификации (401)
- Ошибки доступа (403)
- Ошибки валидации (422)
- Ошибки сервера (500)

### Примеры ответов API

#### Успешный ответ
```json
{
    "status": "success",
    "data": {
        // Данные ответа
    }
}
```

#### Ответ с ошибкой
```json
{
    "status": "error",
    "message": "Описание ошибки"
}
```

### Ограничения API

- Максимальное количество запросов: 100 запросов в минуту
- Максимальный размер запроса: 10MB
- Таймаут запроса: 30 секунд

### Рекомендации по использованию

1. Всегда используйте обработку ошибок при работе с API
2. Кэшируйте часто используемые данные (например, список валют)
3. Используйте пагинацию при работе с большими списками
4. Проверяйте статус ответа перед обработкой данных
